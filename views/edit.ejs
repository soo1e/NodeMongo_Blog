<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>BLOG</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <style>
        .form-box {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-top: 50px;
            height: 600px;
        }
        .form-box h4 {
            margin-bottom: 20px;
            text-align: center;
        }
        .form-box input[type="text"] {
            margin-bottom: 15px;
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .form-box textarea {
            margin-bottom: 15px;
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ccc;
            resize: none; /* 내용 입력 필드 크기 조절 비활성화 */
            height: 400px;
        }
        .form-box button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 0 auto; /* 버튼을 가운데 위치시킴 */
            margin-top: 30px;
            margin-bottom: 50px;
        }
        .form-box button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body class="grey-bg">
<%- include('nav.ejs') %>
<!-- 포스트 작성하기 -->
<form class="form-box" action="/edit/<%= result._id %>" method="post" enctype="multipart/form-data">
    <h4>글 수정하기</h4>
    <input type="text" class="form-control" name="title" value="<%= result.title %>" placeholder="제목을 입력하세요" required>
    <textarea class="form-control" name="content" rows="5" placeholder="내용을 입력하세요" required><%= result.content %></textarea>
    <input type="file" class="form-control" name="img1" accept="image/*" <% if (result.img) { %> data-default="<%= result.img %>" <% } %> multiple>
    <button type="submit" class="btn btn-success">수정</button>
</form>
<%- include('footer.ejs') %>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // 페이지가 로드되면 실행되는 코드

        // 이미지 파일 선택을 담당하는 input 요소 가져오기
        const imgInput = document.querySelector('input[name="img1"]');

        // data-default 속성이 존재하는 경우 해당 속성 값을 기본값으로 설정
        const defaultImgValue = imgInput.getAttribute('data-default');
        if (defaultImgValue) {
            imgInput.value = defaultImgValue;
        }
    });
</script>

</body>
</html>
